output "ec2_private_ip" {
  description = "Private IP of EC2 instance"
  value       = aws_instance.mongo.private_ip
}

output "lambda_function_name" {
  description = "Lambda function name"
  value       = aws_lambda_function.mongo_client.function_name
}

output "api_gateway_id" {
  description = "API Gateway REST API ID"
  value       = aws_api_gateway_rest_api.mongo_api.id
}

output "api_gateway_base_url" {
  description = "API Gateway base URL"
  value       = "https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod"
}

output "api_endpoints" {
  description = "Available API endpoints for testing"
  value = {
    health_check = "https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/health"
    documents_base = "https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/documents"
  }
}

output "curl_examples" {
  description = "Example curl commands for testing"
  value = {
    health_check = "curl -X GET https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/health"
    
    create_document = "curl -X POST https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/documents -H 'Content-Type: application/json' -d '{\"name\":\"test\",\"status\":\"active\"}'"
    
    get_all_documents = "curl -X GET https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/documents"
    
    get_filtered_documents = "curl -X GET 'https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/documents?filter={\"status\":\"active\"}'"
    
    update_documents = "curl -X PUT https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/documents -H 'Content-Type: application/json' -d '{\"query\":{\"status\":\"active\"},\"update\":{\"$set\":{\"status\":\"completed\"}}}'"
    
    delete_documents = "curl -X DELETE 'https://${aws_api_gateway_rest_api.mongo_api.id}.execute-api.${var.aws_region}.amazonaws.com/prod/api/documents?filter={\"status\":\"completed\"}'"
  }
}